<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Casino Endiorite</title>
<style>
/* Reset et Box-sizing */
* { 
  box-sizing: border-box; 
}

body {
  margin: 0;
  min-height: 100vh;
  /* DÃ©gradÃ© bleu nuit pour le fond */
  background: radial-gradient(circle at top, #0f172a, #020617);
  font-family: system-ui, -apple-system, Arial, sans-serif;
  color: #f0f9ff;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
}

/* Carte adaptative */
.card {
  width: 100%;
  max-width: 420px;
  background: #0b1120; /* Bleu trÃ¨s sombre */
  border-radius: 16px;
  padding: 24px;
  border: 1px solid #1e3a8a; /* Bordure bleue discrÃ¨te */
  box-shadow: 0 10px 40px rgba(0,0,0,0.8), 0 0 20px rgba(30, 58, 138, 0.2);
  transition: transform 0.3s ease;
}

/* Typographie */
h1, h2, h3 {
  text-align: center;
  margin: 12px 0;
  line-height: 1.2;
  color: #60a5fa; /* Bleu clair pour les titres */
}

h1 { font-size: 1.8rem; }

/* Champs de saisie */
input {
  width: 100%;
  padding: 14px;
  margin: 8px 0;
  border-radius: 10px;
  border: 1px solid #1e293b;
  background: #020617;
  color: #bfdbfe;
  font-size: 16px;
  outline: none;
}

input:focus {
  border-color: #3b82f6;
  box-shadow: 0 0 8px rgba(59, 130, 246, 0.3);
}

/* Boutons */
button, .game-btn {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  border: none;
  border-radius: 10px;
  /* DÃ©gradÃ© bleu nÃ©on */
  background: linear-gradient(135deg, #3b82f6, #1d4ed8);
  color: #fff;
  font-weight: 700;
  font-size: 16px;
  text-decoration: none;
  display: block;
  text-align: center;
  cursor: pointer;
  transition: opacity 0.2s, transform 0.1s, box-shadow 0.2s;
  -webkit-tap-highlight-color: transparent;
}

button:active, .game-btn:active {
  transform: scale(0.98);
}

.secondary {
  background: #1e293b;
  color: #94a3b8;
  border: 1px solid #334155;
}

.secondary:hover {
  background: #334155;
}

/* Messages et Feedback */
.msg {
  font-size: 14px;
  min-height: 20px;
  color: #7dd3fc; /* Cyan clair */
  text-align: center;
  margin: 10px 0;
}

.hidden { display: none; }

.credit-box {
  text-align: center;
  font-size: 24px;
  font-weight: bold;
  margin: 15px 0;
  color: #3b82f6; /* Bleu vif */
  text-shadow: 0 0 10px rgba(59, 130, 246, 0.4);
}

.section {
  margin-top: 20px;
  padding-top: 15px;
  border-top: 1px solid #1e293b;
}

/* Grille de jeux adaptÃ©e */
.game-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

/* --- ADAPTATIONS SPECIFIQUES --- */

@media (max-width: 350px) {
  .card { padding: 16px; }
  .game-grid { grid-template-columns: 1fr; }
}

@media (min-width: 768px) {
  button:hover, .game-btn:hover {
    opacity: 0.9;
    box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
  }
  .card:hover {
    transform: translateY(-5px);
  }
}
</style>
</head>
<body>

<div class="card">

<div id="auth">
  <h1>ğŸ° Casino Endio</h1>
  <input id="pseudo" placeholder="Pseudo">
  <input id="password" type="password" placeholder="Mot de passe">
  <button id="registerBtn">CrÃ©er un compte</button>
  <button id="loginBtn" class="secondary">Se connecter</button>
  <div class="msg" id="authMsg"></div>
</div>

    
<div id="casino" class="hidden">

  <h2 id="welcome"></h2>
  <div class="credit-box">ğŸ’° <span id="credits">0</span> crÃ©dits</div>

  <div class="section">
    <button id="bonusBtn">ğŸ Bonus +50</button>
    <div class="msg" id="bonusTimer"></div>
    <div class="msg" id="bonusMsg"></div>
  </div>

  <div class="section">
  <h3>ğŸ® Jeux</h3>
  <div class="game-grid">
    <a href="https://kikoco16.github.io/GRANDE-Roulette-Endiorite/" class="game-btn">ğŸ¡ Roulette</a>
<a href="https://kikoco16.github.io/Roulette-Endiorite/" class="game-btn">ğŸ° Slots</a>
<a href="https://kikoco16.github.io/Blackjack-Endiorite/" class="game-btn">ğŸƒ Blackjack</a>
<a href="https://kikoco16.github.io/Coin-Flip-Endiorite/" class="game-btn">ğŸª™ Coinflip</a>
<a href="https://kikoco16.github.io/Course-chvl-endio/" class="game-btn">ğŸ Course de Chevaux</a>
<a href="https://kikoco16.github.io/Ticket-Endiorite/" class="game-btn">ğŸŸï¸ Tickets Ã  gratter</a>    
<a href="https://kikoco16.github.io/Crans-Endiorite/" class="game-btn">ğŸ² Craps</a>
<a href="https://kikoco16.github.io/Braquage-Endiorite/" class="game-btn">ğŸ’° Braquage</a>
    </div>
</div>

  <div class="section">
    <h3>Envoyer des crÃ©dits</h3>
    <input id="toUser" placeholder="Pseudo">
    <input id="amount" type="number" placeholder="Montant">
    <button id="sendBtn">Envoyer</button>
    <div class="msg" id="sendMsg"></div>
  </div>

  <div class="section">
    <h3>Consulter un compte</h3>
    <input id="checkUser" placeholder="Pseudo">
    <button id="checkBtn">Voir crÃ©dits</button>
    <div class="msg" id="checkMsg"></div>
  </div>
  
  <a href="https://kikoco16.github.io/Classement-Endiorite/" class="game-btn">ğŸ† Classement Casino</a>

  
  <button id="logoutBtn" class="secondary">DÃ©connexion</button>


</div>
</div>

<script type="module">
  
  const manifest = {
        "name": "Casino Endio", "short_name": "Casino Endio", "start_url": window.location.href,
        "display": "standalone", "background_color": "#e7ebf0", "theme_color": "#0088cc",
        "icons": [{"src": "https://cdn-icons-png.flaticon.com/512/831/831489.png", "sizes": "192x192", "type": "image/png"}]
    };
    const blob = new Blob([JSON.stringify(manifest)], {type: 'application/json'});
    const link = document.createElement('link'); link.rel = 'manifest'; link.href = URL.createObjectURL(blob);
    document.head.appendChild(link);

  
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getDatabase, ref, get, set, update } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDAQALLN99kqiYY4UZz9wl2stedP5KQ5mA",
  authDomain: "casino-b23c9.firebaseapp.com",
  databaseURL: "https://casino-b23c9-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "casino-b23c9",
  storageBucket: "casino-b23c9.firebasestorage.app",
  messagingSenderId: "139229793155",
  appId: "1:139229793155:web:953b31b383a87bc3c504b6"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

let currentUser = localStorage.getItem("casinoUser");
if(!currentUser){
    alert("Vous devez vous connecter d'abord !");
    window.location.href = "https://kikoco16.github.io/Casino-Endiorite/";
}
let bonusInterval = null;

// DOM
const pseudo = document.getElementById("pseudo");
const password = document.getElementById("password");
const authMsg = document.getElementById("authMsg");
const auth = document.getElementById("auth");
const casino = document.getElementById("casino");
const welcome = document.getElementById("welcome");
const creditsEl = document.getElementById("credits");
const bonusTimer = document.getElementById("bonusTimer");
const bonusMsg = document.getElementById("bonusMsg");
const sendMsg = document.getElementById("sendMsg");
const checkMsg = document.getElementById("checkMsg");

document.getElementById("registerBtn").onclick = register;
document.getElementById("loginBtn").onclick = login;
document.getElementById("sendBtn").onclick = sendCredits;
document.getElementById("checkBtn").onclick = checkCredits;
document.getElementById("bonusBtn").onclick = claimBonus;

  document.getElementById("logoutBtn").onclick = () => {
  localStorage.removeItem("casinoUser");
  window.location.reload(); // retourne Ã  l'Ã©cran de login
};
  
  
  
  
async function register() {
  const user = pseudo.value.trim();
  const pass = password.value;
  if (!user || !pass) return authMsg.textContent = "Champs requis";

  const r = ref(db,"users/"+user);
  if ((await get(r)).exists()) return authMsg.textContent="Pseudo dÃ©jÃ  pris";

  await set(r,{ password:pass, credits:1000, balance:1000, lastBonus:0 });
  authMsg.textContent="Compte crÃ©Ã© âœ”";
}
  


async function login() {
  const user = pseudo.value.trim();
  const pass = password.value;

  // VÃ©rification des champs
  if (!user || !pass) {
    authMsg.textContent = "Champs requis";
    return;
  }

  // RÃ©cupÃ©ration de l'utilisateur depuis Firebase
  const snap = await get(ref(db, "users/" + user));

  // VÃ©rification existence + mot de passe
  if (!snap.exists() || snap.val().password !== pass) {
    authMsg.textContent = "Identifiants invalides";
    return;
  }

  // â›” VÃ‰RIFICATION BAN (AU BON ENDROIT)
  if (snap.val().banned) {
    authMsg.textContent = "â›” Compte banni";
    return;
  }

  // âœ… Connexion rÃ©ussie
  currentUser = user;
  localStorage.setItem("casinoUser", currentUser);

  auth.classList.add("hidden");
  casino.classList.remove("hidden");

  welcome.textContent = "Bienvenue " + currentUser;
  refreshCredits();
  startBonusTimer();
}

async function refreshCredits() {
  const snap = await get(ref(db,"users/"+currentUser));
  creditsEl.textContent=snap.val().credits;
}

async function startBonusTimer() {
  clearInterval(bonusInterval);
  bonusInterval=setInterval(async ()=>{
    const snap = await get(ref(db,"users/"+currentUser));
    const diff = 12*60*60*1000 - (Date.now()-snap.val().lastBonus);
    if (diff<=0) {
      bonusTimer.textContent="ğŸ Bonus disponible";
    } else {
      const h=Math.floor(diff/3600000);
      const m=Math.floor(diff%3600000/60000);
      const s=Math.floor(diff%60000/1000);
      bonusTimer.textContent=`â³ Prochain bonus dans ${h}h ${m}m ${s}s`;
    }
  },1000);
}

async function claimBonus() {
  const r = ref(db,"users/"+currentUser);
  const snap = await get(r);
  if (Date.now()-snap.val().lastBonus < 12*60*60*1000)
    return bonusMsg.textContent="Bonus indisponible";

  await update(r,{
    credits:snap.val().credits+50,
    balance:snap.val().balance+50,
    lastBonus:Date.now(),
    password:snap.val().password
  });
  bonusMsg.textContent="+50 crÃ©dits ğŸ‰";
  refreshCredits();
}

async function sendCredits() {
  const to=document.getElementById("toUser").value.trim();
  const amount=Number(document.getElementById("amount").value);
  if (to===currentUser || amount<=0) return sendMsg.textContent="Action impossible";

  const f=ref(db,"users/"+currentUser);
  const t=ref(db,"users/"+to);
  const fs=await get(f), ts=await get(t);
  if (!ts.exists()||fs.val().credits<amount) return sendMsg.textContent="Erreur";

  await update(f,{credits:fs.val().credits-amount,balance:fs.val().balance-amount,password:fs.val().password});
  await update(t,{credits:ts.val().credits+amount,balance:ts.val().balance+amount,password:ts.val().password});
  sendMsg.textContent="Transfert âœ”";
  refreshCredits();
}

async function checkCredits() {
  const u=document.getElementById("checkUser").value.trim();
  const s=await get(ref(db,"users/"+u));
  checkMsg.textContent=s.exists()?`${u} : ${s.val().credits} crÃ©dits`:"Utilisateur inconnu";
}

window.openGame = (game) => {
  alert("Ouverture du jeu : " + game);
};
</script>

</body>
</html>
