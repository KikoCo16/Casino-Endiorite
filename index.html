<!DOCTYPE html>  <html lang="fr">  
<head>  
<meta charset="UTF-8">  
<title>Casino Endiorite</title>  
<style>  
* { box-sizing: border-box; }  body {
margin: 0;
min-height: 100vh;
background: radial-gradient(circle at top, #0f172a, #020617);
font-family: system-ui, -apple-system, Arial, sans-serif;
color: #f0f9ff;
display: flex;
justify-content: center;
align-items: center;
padding: 20px;
}

.card {
width: 100%;
max-width: 420px;
background: #0b1120;
border-radius: 16px;
padding: 24px;
border: 1px solid #1e3a8a;
box-shadow: 0 10px 40px rgba(0,0,0,0.8), 0 0 20px rgba(30, 58, 138, 0.2);
transition: transform 0.3s ease;
}

h1, h2, h3 { text-align: center; margin: 12px 0; line-height: 1.2; color: #60a5fa; }
h1 { font-size: 1.8rem; }

input {
width: 100%;
padding: 14px;
margin: 8px 0;
border-radius: 10px;
border: 1px solid #1e293b;
background: #020617;
color: #bfdbfe;
font-size: 16px;
outline: none;
}
input:focus { border-color: #3b82f6; box-shadow: 0 0 8px rgba(59,130,246,0.3); }

button, .game-btn {
width: 100%;
padding: 14px;
margin-top: 10px;
border: none;
border-radius: 10px;
background: linear-gradient(135deg, #3b82f6, #1d4ed8);
color: #fff;
font-weight: 700;
font-size: 16px;
text-decoration: none;
display: block;
text-align: center;
cursor: pointer;
transition: opacity 0.2s, transform 0.1s, box-shadow 0.2s;
-webkit-tap-highlight-color: transparent;
}
button:active, .game-btn:active { transform: scale(0.98); }

.secondary { background: #1e293b; color: #94a3b8; border: 1px solid #334155; }
.secondary:hover { background: #334155; }

.msg { font-size: 14px; min-height: 20px; color: #7dd3fc; text-align: center; margin: 10px 0; }
.hidden { display: none; }

.credit-box { text-align: center; font-size: 24px; font-weight: bold; margin: 15px 0; color: #3b82f6; text-shadow: 0 0 10px rgba(59,130,246,0.4); }

.section { margin-top: 20px; padding-top: 15px; border-top: 1px solid #1e293b; }
.game-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }

.giveaway {
background: #020617aa;
border: 1px solid #1e293b;
border-radius: 12px;
padding: 10px;
margin: 8px 0;
font-size: 14px;
}

.giveaway button {
margin-top: 6px;
padding: 8px;
font-size: 14px;
}

@media (max-width: 350px) { .card { padding: 16px; } .game-grid { grid-template-columns: 1fr; } }
@media (min-width: 768px) { button:hover, .game-btn:hover { opacity: 0.9; box-shadow: 0 0 15px rgba(59,130,246,0.4); } .card:hover { transform: translateY(-5px); } }
</style>

</head>  
<body>  <div class="card">  <div id="auth">  
  <h1>ğŸ° Casino Endio</h1>  
  <input id="pseudo" placeholder="Pseudo">  
  <input id="password" type="password" placeholder="Mot de passe">  
  <button id="registerBtn">CrÃ©er un compte</button>  
  <button id="loginBtn" class="secondary">Se connecter</button>  
  <div class="msg" id="authMsg"></div>  
  <h6>âš ï¸ Pour tout changement de MDP ou pseudo, merci de mp KikoFox16 âš ï¸</h6>  
</div>  <div id="casino" class="hidden">  
  <h2 id="welcome"></h2>  
  <div class="credit-box">ğŸ’° <span id="credits">0</span> crÃ©dits</div>    <div class="section">  
    <button id="bonusBtn">ğŸ Bonus +50</button>  
    <div class="msg" id="bonusTimer"></div>  
    <div class="msg" id="bonusMsg"></div>  
  </div>    <div class="section">  
    <h3>ğŸ® Jeux</h3>  
    <div class="game-grid">  
      <a href="https://kikoco16.github.io/GRANDE-Roulette-Endiorite/" class="game-btn">ğŸ¡ Roulette</a>  
      <a href="https://kikoco16.github.io/Roulette-Endiorite/" class="game-btn">ğŸ° Slots</a>  
      <a href="https://kikoco16.github.io/Blackjack-Endiorite/" class="game-btn">ğŸƒ Blackjack</a>  
      <a href="https://kikoco16.github.io/Coin-Flip-Endiorite/" class="game-btn">ğŸª™ Coinflip</a>  
      <a href="https://kikoco16.github.io/Course-chvl-endio/" class="game-btn">ğŸ Course de Chevaux</a>  
      <a href="https://kikoco16.github.io/Ticket-Endiorite/" class="game-btn">ğŸŸï¸ Tickets Ã  gratter</a>  
      <a href="https://kikoco16.github.io/Crans-Endiorite/" class="game-btn">ğŸ² Craps</a>  
      <a href="https://kikoco16.github.io/Peche-Endiorite/" class="game-btn">ğŸ£ PÃªche</a>  
      <a href="https://kikoco16.github.io/Mine-Endiorite/" class="game-btn">â›ï¸ Mine</a>  
      <a href="https://kikoco16.github.io/Poker-Endiorite/" class="game-btn">ğŸƒ Poker</a>  
      <a href="https://kikoco16.github.io/Braquage-Endiorite/" class="game-btn">ğŸ’° Braquage</a>  
      <a href="https://kikoco16.github.io/1v1-Endiorite/" class="game-btn">ğŸ”´ğŸŸ¡ Puissance 4 1v1</a>
    </div>  
  </div>    <div class="section">  
    <h3>Envoyer des crÃ©dits</h3>  
    <input id="toUser" placeholder="Pseudo">  
    <input id="amount" type="number" placeholder="Montant">  
    <button id="sendBtn">Envoyer</button>  
    <div class="msg" id="sendMsg"></div>  
  </div>    <div class="section">  
    <h3>Consulter un compte</h3>  
    <input id="checkUser" placeholder="Pseudo">  
    <button id="checkBtn">Voir crÃ©dits</button>  
    <div class="msg" id="checkMsg"></div>  
  </div>    <div class="section">  
    <h3>ğŸ‰ Giveaways en cours</h3>  
    <div id="giveawayContainer">Chargement...</div>  
  </div>  <a href="https://kikoco16.github.io/Classement-Endiorite/" class="game-btn">ğŸ† Classement Casino</a>
<button id="logoutBtn" class="secondary">DÃ©connexion</button>

</div>  </div>  <script type="module">  
  
  const manifest = {
        "name": "Casino Endio", "short_name": "Casino Endio", "start_url": window.location.href,
        "display": "standalone", "background_color": "#e7ebf0", "theme_color": "#0088cc",
        "icons": [{"src": "https://cdn-icons-png.flaticon.com/512/5525/5525089.png", "sizes": "192x192", "type": "image/png"}]
    };
    const blob = new Blob([JSON.stringify(manifest)], {type: 'application/json'});
    const link = document.createElement('link'); link.rel = 'manifest'; link.href = URL.createObjectURL(blob);
    document.head.appendChild(link);

  
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";  
import { getDatabase, ref, get, set, update } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";  
  
const firebaseConfig = {  
  apiKey: "AIzaSyDAQALLN99kqiYY4UZz9wl2stedP5KQ5mA",  
  authDomain: "casino-b23c9.firebaseapp.com",  
  databaseURL: "https://casino-b23c9-default-rtdb.europe-west1.firebasedatabase.app",  
  projectId: "casino-b23c9",  
  storageBucket: "casino-b23c9.firebasestorage.app",  
  messagingSenderId: "139229793155",  
  appId: "1:139229793155:web:953b31b383a87bc3c504b6"  
};  
  
const app = initializeApp(firebaseConfig);  
const db = getDatabase(app);  
  
let currentUser = null;  
let bonusInterval = null;  
  
// DEVICE ID  
function getDeviceId(){  
  let id = localStorage.getItem("deviceId");  
  if(!id){  
    id = crypto.randomUUID();  
    localStorage.setItem("deviceId", id);  
  }  
  return id;  
}  
const deviceId = getDeviceId();  
  
// DOM  
const pseudo = document.getElementById("pseudo");  
const password = document.getElementById("password");  
const authMsg = document.getElementById("authMsg");  
const auth = document.getElementById("auth");  
const casino = document.getElementById("casino");  
const welcome = document.getElementById("welcome");  
const creditsEl = document.getElementById("credits");  
const bonusTimer = document.getElementById("bonusTimer");  
const bonusMsg = document.getElementById("bonusMsg");  
const sendMsg = document.getElementById("sendMsg");  
const checkMsg = document.getElementById("checkMsg");  
const giveawayContainer = document.getElementById("giveawayContainer");  
  
document.getElementById("registerBtn").onclick = register;  
document.getElementById("loginBtn").onclick = login;  
document.getElementById("sendBtn").onclick = sendCredits;  
document.getElementById("checkBtn").onclick = checkCredits;  
document.getElementById("bonusBtn").onclick = claimBonus;  
document.getElementById("logoutBtn").onclick = () => {  
  localStorage.removeItem("casinoUser");  
  window.location.reload();  
};  
  
// VÃ©rifier si appareil banni  
async function isDeviceBanned() {  
  const snap = await get(ref(db,"bannedDevices/"+deviceId));  
  return snap.exists();  
}  
  
  
 async function deviceAlreadyUsed() {
  const snap = await get(ref(db, "users"));
  if (!snap.exists()) return false;

  const users = snap.val();
  for (const u in users) {
    if (users[u].deviceId === deviceId) {
      return true;
    }
  }
  return false;
} 
  
// REGISTER  
async function register() {
  if (await isDeviceBanned()) {
    authMsg.textContent = "ğŸš« Cet appareil est banni";
    return;
  }

  if (await deviceAlreadyUsed()) {
    authMsg.textContent = "âš ï¸ Un compte existe dÃ©jÃ  sur cet appareil";
    return;
  }

  const user = pseudo.value.trim();
  const pass = password.value;

  if (!user || !pass) {
    authMsg.textContent = "Champs requis";
    return;
  }

  const r = ref(db, "users/" + user);
  if ((await get(r)).exists()) {
    authMsg.textContent = "Pseudo dÃ©jÃ  pris";
    return;
  }

  await set(r, {
    password: pass,
    credits: 1000,
    balance: 1000,
    lastBonus: 0,
    deviceId: deviceId,
    banned: false
  });

  authMsg.textContent = "Compte crÃ©Ã© âœ”";
}
  
// LOGIN  
async function login() {  
  const user = pseudo.value.trim();  
  const pass = password.value;  
  if(!user || !pass) return authMsg.textContent="Champs requis";  
  const snap = await get(ref(db,"users/"+user));  
  if(!snap.exists() || snap.val().password !== pass){ authMsg.textContent="Identifiants invalides"; return; }  
  if(snap.val().banned){ authMsg.textContent="â›” Compte banni"; return; }  
  
  currentUser = user;  
  localStorage.setItem("casinoUser",currentUser);  
  auth.classList.add("hidden");  
  casino.classList.remove("hidden");  
  welcome.textContent="Bienvenue " + currentUser;  
  refreshCredits();  
  startBonusTimer();  
  loadGiveaways();  
}  
  
// CrÃ©dit & bonus  
async function refreshCredits() {  
  const snap = await get(ref(db,"users/"+currentUser));  
  creditsEl.textContent=snap.val().credits;  
}  
  
async function startBonusTimer() {  
  clearInterval(bonusInterval);  
  bonusInterval=setInterval(async ()=>{  
    const snap = await get(ref(db,"users/"+currentUser));  
    const diff=12*60*60*1000-(Date.now()-snap.val().lastBonus);  
    if(diff<=0){ bonusTimer.textContent="ğŸ Bonus disponible"; }  
    else{  
      const h=Math.floor(diff/3600000);  
      const m=Math.floor(diff%3600000/60000);  
      const s=Math.floor(diff%60000/1000);  
      bonusTimer.textContent=`â³ Prochain bonus dans ${h}h ${m}m ${s}s`;  
    }  
  },1000);  
}  
  
async function claimBonus() {  
  const r = ref(db,"users/"+currentUser);  
  const snap = await get(r);  
  if(Date.now()-snap.val().lastBonus < 12*60*60*1000) return bonusMsg.textContent="Bonus indisponible";  
  await update(r,{ credits:snap.val().credits+50, balance:snap.val().balance+50, lastBonus:Date.now(), password:snap.val().password });  
  bonusMsg.textContent="+50 crÃ©dits ğŸ‰";  
  refreshCredits();  
}  
  
// Envoyer & consulter crÃ©dits  
async function sendCredits() {  
  const to=document.getElementById("toUser").value.trim();  
  const amt=Number(document.getElementById("amount").value);  
  if(to===currentUser || amt<=0) return sendMsg.textContent="Action impossible";  
  const f=ref(db,"users/"+currentUser);  
  const t=ref(db,"users/"+to);  
  const fs=await get(f), ts=await get(t);  
  if(!ts.exists()||fs.val().credits<amt) return sendMsg.textContent="Erreur";  
  await update(f,{credits:fs.val().credits-amt,balance:fs.val().balance-amt,password:fs.val().password});  
  await update(t,{credits:ts.val().credits+amt,balance:ts.val().balance+amt,password:ts.val().password});  
  sendMsg.textContent="Transfert âœ”";  
  refreshCredits();  
}  
  
async function checkCredits() {  
  const u=document.getElementById("checkUser").value.trim();  
  const s=await get(ref(db,"users/"+u));  
  checkMsg.textContent=s.exists()?`${u} : ${s.val().credits} crÃ©dits`:"Utilisateur inconnu";  
}  
  
// GIVEAWAYS  
async function loadGiveaways() {  
  giveawayContainer.innerHTML = "";  
  const snap = await get(ref(db, "giveaways"));  
  if (!snap.exists()) {  
    giveawayContainer.textContent = "Aucun giveaway";  
    return;  
  }  
  
  const all = snap.val();  
  const now = Date.now();  
  let anyVisible = false;  
  
  for (const id in all) {  
    const g = all[id];  
  
    // â³ rÃ¨gle des 5h aprÃ¨s la fin  
    const showUntil = g.endTime + 5 * 60 * 60 * 1000;  
    if (Date.now() > showUntil) continue;  
  
    const div = document.createElement("div");  
    div.className = "giveaway";  
    anyVisible = true;  
  
    /* =========================  
       ğŸ† GIVEAWAY TERMINÃ‰  
       ========================= */  
    if (g.ended) {  
      div.innerHTML = `  
        <div>ğŸ† Giveaway terminÃ©</div>  
        <div>Gain : ${g.amount} crÃ©dits</div>  
        <div>Gagnant : <b>${g.winner || "Aucun"}</b></div>  
      `;  
      giveawayContainer.appendChild(div);  
      continue;  
    }  
  
    /* =========================  
       ğŸŸ¢ GIVEAWAY EN COURS  
       ========================= */  
    const endIn = g.endTime - now;  
    if (endIn <= 0) continue;  
  
    const participants = Array.isArray(g.participants) ? g.participants : [];  
  
    const h = Math.floor(endIn / 3600000);  
    const m = Math.floor((endIn % 3600000) / 60000);  
  
    div.innerHTML = `  
      <div>Montant : ${g.amount} crÃ©dits</div>  
      <div>Participants (${participants.length}) : ${participants.join(", ") || "Aucun"}</div>  
      <div>â³ Temps restant : ${h}h ${m}m</div>  
    `;  
  
    if (!participants.includes(currentUser)) {  
      const btn = document.createElement("button");  
      btn.textContent = "Participer";  
      btn.onclick = async () => {  
        participants.push(currentUser);  
        await update(ref(db, "giveaways/" + id), { participants });  
        loadGiveaways();  
      };  
      div.appendChild(btn);  
    } else {  
      div.innerHTML += "<div>âœ… DÃ©jÃ  inscrit</div>";  
    }  
  
    giveawayContainer.appendChild(div);  
  }  
  
  if (!anyVisible) {  
    giveawayContainer.textContent = "Aucun giveaway";  
  }  
}  
  
// Auto-reconnexion  
window.addEventListener("load", async ()=>{  
  if(await isDeviceBanned()){ alert("ğŸš« Cet appareil est banni"); localStorage.clear(); return; }  
  
  const savedUser = localStorage.getItem("casinoUser");  
  if(!savedUser) return;  
  const snap = await get(ref(db,"users/"+savedUser));  
  if(!snap.exists()){ localStorage.removeItem("casinoUser"); return; }  
  
  currentUser = savedUser;  
  auth.classList.add("hidden");  
  casino.classList.remove("hidden");  
  welcome.textContent="Bienvenue " + currentUser;  
  refreshCredits();  
  startBonusTimer();  
  loadGiveaways();  
});  
</script>  </body>  
</html>
